var Constants;Constants={SCALE:.09,SCALE_INV:1/.09,BOTTOM:65,BASE_WIDTH:480,BASE_HEIGHT:320,SLIME_START_HEIGHT:60,JUMP_ACCEL:-38,MOVE_ACCEL:25,GRAVITY:50,SET_DELAY:800,ASSETS:{p1:"assets/images/s_0.png",p2:"assets/images/s_1.png",bg:"assets/images/bg.png",ball:"assets/images/ball.png",eye:"assets/images/eye.png",menu_bg:"assets/images/menu_bg.png",logo:"assets/images/logo.png",btn_instructions:"assets/images/btn_instructions.png",btn_one:"assets/images/btn_one.png",btn_options:"assets/images/btn_options.png",btn_wifi:"assets/images/btn_wifi.png",btn_a:"assets/images/btn_a.png",btn_b:"assets/images/btn_b.png",pole:"assets/images/pole.png"}};var Helpers;Helpers={round:function(a){return.5+a<<0},inRect:function(a,b,c,d,e,f){return a>c&&a<c+e&&b>d&&b<d+f}},function(){var a,b,c,d,e;a=0,b=["ms","moz","webkit","o"],d=function(a){return window.requestAnimationFrame=window[b[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[a]+"CancelAnimationFrame"]||window[b[a]+"CancelRequestAnimationFrame"]};for(c=0,e=b.length;0<=e?c<=e:c>=e;0<=e?c++:c--)d.call(this,c);window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d,e,f;return d=(new Date).getTime(),f=Math.max(0,16-(d-a)),e=window.setTimeout(function(){return b(d+f)},f),a=d+f,e});if(!window.cancelAnimationFrame)return window.cancelAnimationFrame=function(a){return window.clearTimeout(a)}}.call(this),CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,d,e){return c<2*e&&(e=c/2),d<2*e&&(e=d/2),this.beginPath(),this.moveTo(a+e,b),this.arcTo(a+c,b,a+c,b+d,e),this.arcTo(a+c,b+d,a,b+d,e),this.arcTo(a,b+d,a,b,e),this.arcTo(a,b,a+c,b,e),this.closePath(),this};var SceneManager;SceneManager=function(){function a(a){this.canvas=a,this.sceneStack=[],this.currScene=null}return a.prototype.pushScene=function(a){return this.sceneStack.push(a),this.currScene&&(this.currScene.stop(),this.currScene.ctx=null),this.currScene=a,this.currScene.ctx=this.ctx,this.currScene.inited?this.currScene.next():this.currScene.start()},a.prototype.popScene=function(){this.currScene&&(this.currScene.stop(),this.currScene.ctx=null),this.sceneStack.pop(),this.currScene=this.sceneStack[this.sceneStack.length-1]||null;if(this.currScene)return this.currScene.next(),this.currScene.ctx=this.ctx},a}();var Scene;Scene=function(){function a(){var a;a=this,this.stopped=!0,this.inited=!1,this.lastTimeout=0,this.width=Globals.Manager.canvas.width,this.height=Globals.Manager.canvas.height,this.center={x:this.width/2,y:this.height/2},this.canvas=Globals.Manager.canvas,this.ctx=this.canvas.getContext("2d"),this.stepCallback=function(b){return a.step(b)}}return a.prototype.start=function(){return this.stopped=!1,this.inited=!0,this.step()},a.prototype.step=function(a){return console.log("Implement me!!!")},a.prototype.next=function(){if(!this.stopped)return this.lastTimeout=window.requestAnimationFrame(this.stepCallback)},a.prototype.stop=function(){return this.stopped=!0,window.cancelAnimationFrame(this.lastTimeout)},a.prototype.click=function(a){},a.prototype.mousedown=function(a){},a.prototype.mouseup=function(a){},a.prototype.mousemove=function(a){},a}();var Loader;Loader=function(){function a(){this.progress=0,this.assets={},this.totalAssets=0,this.loadedAssets=0}return a.prototype.updateProgress=function(){this.progress=this.loadedAssets/this.totalAssets,this.onprogress&&this.onprogress(this.progress);if(this.progress===1&&this.onload)return this.onload()},a.prototype.load=function(a){var b,c,d;d=[];for(c in a)b=a[c],d.push(this.loadAsset(c,b));return d},a.prototype.loadAsset=function(a,b){var c,d;return c=new Image,d=this,c.onload=function(){return this.loaded=!0,d.loadedAssets++,d.updateProgress()},this.assets[a]={loader:this,src:b,image:c},this.totalAssets++,c.src=b},a.prototype.loadProgress=function(a){return this.onprogress=a},a.prototype.loadComplete=function(a){return this.onload=a},a.prototype.getAsset=function(a){return this.assets[a].image},a}();var Input;Input=function(){function a(){var a,b,c,d,e,f,g,h,i,j,k,l;this.keys={},l=this.keys,j=function(a){return a.which||(a.which=a.charCode),a.which||(a.which=a.keyCode),a},i=function(a){var b,c;return c=Globals.Manager.canvas,b=c.getBoundingClientRect(),a.x=(a.x-b.left)*(c.width/b.width),a.y=(a.y-b.top)*(c.height/b.height),a},k=function(a){var b,c,d;return b=Globals.Manager.canvas,c=a.clientX||a.x||a.layerX,d=a.clientY||a.y||a.layerY,i({x:c,y:d})},c=function(a){return l["key"+j(a).which]=!0},d=function(a){return l["key"+j(a).which]=!1},g=function(a){return a=k(a),Globals.Manager.currScene.mouseup(a)},e=function(a){return a=k(a),Globals.Manager.currScene.mousedown(a)},f=function(a){return a=k(a),Globals.Manager.currScene.mousemove(a)},b=function(a){return a=k(a),Globals.Manager.currScene.click(a)},h=function(a,b){return function(a){}},a=Globals.Manager.canvas,document.addEventListener("keydown",c,!0),document.onkeyup=d,a.onmouseup=g,a.onmousedown=e,a.onmousemove=f,a.onclick=b,this.shortcuts={left:["key37","key65"],right:["key39","key68"],up:["key38","key87"],down:["key40","key83"]}}return a.prototype.left=function(a){return this.keys[this.shortcuts.left[a]]||!1},a.prototype.right=function(a){return this.keys[this.shortcuts.right[a]]||!1},a.prototype.up=function(a){return this.keys[this.shortcuts.up[a]]||!1},a.prototype.down=function(a){return this.keys[this.shortcuts.down[a]]||!1},a.prototype.reset=function(){var a,b,c,d;c=this.keys,d=[];for(a in c)b=c[a],d.push(this.keys[a]=!1);return d},a}();var World;World=function(){function a(){var a;this.canvas=Globals.Manager.canvas,this.ctx=this.canvas.getContext("2d"),this.width=parseFloat(this.canvas.width),this.height=parseFloat(this.canvas.height),this.ctx._world=this,a=new Box2D.Common.Math.b2Vec2(0,Constants.GRAVITY),this.world=new Box2D.Dynamics.b2World(a,!0),this.sprites=[],this.oldTime=new Date}return a.prototype.addStaticSprite=function(a){return this.sprites.push({sprite:a})},a.prototype.addSprite=function(a){var b;return b=this.world.CreateBody(a.body),b.CreateFixture(a.fixture),this.sprites.push({sprite:a,body:b})},a.prototype.draw=function(){var a,b,c,d,e;this.ctx.clearRect(0,0,this.width,this.height),d=this.sprites,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.body&&a.sprite.updateBody(a.body,this),e.push(a.sprite.draw(this.ctx));return e},a.prototype.step=function(a){var b;return b=a-this.oldTime,this.oldTime=a,this.world.Step(b/1e3,15,15),this.world.ClearForces()},a}();var Sprite;Sprite=function(){function a(a,b,c,d,e){this.x=a,this.y=b,this.width=c,this.height=d,this.bg=e,this.scaledX=this.x*Constants.SCALE,this.scaledY=this.y*Constants.SCALE,this.createBody()}return a.prototype.createBody=function(){return this.body=null},a.prototype.updateBody=function(a,b){if(a)return this.x=a.GetPosition().x*Constants.SCALE_INV,this.y=a.GetPosition().y*Constants.SCALE_INV,this.m_body||(this.m_body=a)},a.prototype.setPosition=function(a,b){return this.m_body.SetPosition({x:a*Constants.SCALE,y:this.m_body?b*Constants.SCALE:void 0}),this.x=a,this.y=b},a.prototype.draw=function(a){if(this.bg)return a.drawImage(this.bg,Helpers.round(this.x),Helpers.round(this.y))},a}();var Button,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Button=function(){function a(b,c,d,e,f,g,h){this.x=b,this.y=c,this.width=d,this.height=e,this.img=f,this.downImg=g,this.scene=h,this.down=!1,a.__super__.constructor.call(this,this.x,this.y,this.width,this.height,this.img)}return __extends(a,Sprite),a.prototype.handleMouseDown=function(a){return this.down=Helpers.inRect(a.x,a.y,this.x,this.y,this.width,this.height)},a.prototype.handleMouseUp=function(a){return this.down=!1},a.prototype.handleMouseMove=function(a){if(this.down)return this.down=Helpers.inRect(a.x,a.y,this.x,this.y,this.width,this.height)},a.prototype.handleClick=function(a){this.down=!1;if(Helpers.inRect(a.x,a.y,this.x,this.y,this.width,this.height)&&this.scene)return this.scene.buttonPressed(this)},a.prototype.draw=function(a){if(!this.img)return;return a.drawImage(this.down?this.downImg:this.img,Helpers.round(this.x),Helpers.round(this.y))},a}();var Globals;Globals={Input:null,Manager:new SceneManager,Loader:new Loader};var StretchySprite,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};StretchySprite=function(){function a(b,c,d,e,f,g,h){this.x=b,this.y=c,this.width=d,this.height=e,this.rightCap=f,this.topCap=g,this.bg=h,this.generateStretchedImage(),a.__super__.constructor.call(this,this.x,this.y,this.width,this.height)}return __extends(a,Sprite),a.prototype.generateStretchedImage=function(){var a,b,c,d,e,f,g,h;return a=function(a,b){var c;return c=document.createElement("canvas"),c.width=a,c.height=b,c},f=a(this.width,2),c=a(8,this.height),g=f.getContext("2d"),g.drawImage(this.bg,0,this.topCap,this.bg.width,1,0,0,this.width,f.height),d=c.getContext("2d"),d.drawImage(this.bg,this.bg.width-this.rightCap-c.width,0,c.width,this.bg.height,0,this.height-this.bg.height,c.width,this.bg.height),this.stretchedImage=a(this.width,this.height),b=this.stretchedImage.getContext("2d"),b.drawImage(this.bg,this.x,this.y+this.height-this.bg.height),e=b.createPattern(c,"repeat-x"),b.fillStyle=e,b.fillRect(this.bg.width-this.rightCap,this.height-this.bg.height,this.width-this.bg.width,this.bg.height),h=b.createPattern(f,"repeat-y"),b.fillStyle=h,b.fillRect(0,this.topCap,this.width,this.height-this.bg.height),b.drawImage(this.bg,0,0,this.bg.width,this.topCap,0,0,this.width,this.topCap),b.drawImage(this.bg,this.bg.width-this.rightCap,0,this.rightCap,this.bg.height,this.width-this.rightCap,this.height-this.bg.height,this.rightCap,this.bg.height)},a.prototype.draw=function(a){return a.drawImage(this.stretchedImage,0,0)},a}();var Slime,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Slime=function(){function a(b,c,d,e,f){this.x=b,this.y=c,this.color=d,this.img=e,this.eyeImg=f,this.radius=31,this.isP2=!1,this.score=0,a.__super__.constructor.call(this,this.x,this.y,this.radius*2,this.radius*2)}return __extends(a,Sprite),a.prototype.createBody=function(){return this.fixture=new Box2D.Dynamics.b2FixtureDef,this.fixture.density=1,this.fixture.friction=.6,this.fixture.restitution=.2,this.fixture.shape=new Box2D.Collision.Shapes.b2CircleShape(this.radius*Constants.SCALE),this.body=new Box2D.Dynamics.b2BodyDef,this.body.type=Box2D.Dynamics.b2Body.b2_dynamicBody,this.body.position.Set(this.scaledX,this.scaledY)},a.prototype.handleInput=function(a,b){var c,d,e;e=b.height-this.y,d=this.isP2?1:0,c=Constants.BOTTOM,a.left(d)&&(this.m_body.m_linearVelocity.x=-Constants.MOVE_ACCEL,this.m_body.SetAwake(!0)),a.right(d)&&(this.m_body.m_linearVelocity.x=Constants.MOVE_ACCEL,this.m_body.SetAwake(!0));if(a.up(d)){if(e<c)return this.m_body.m_linearVelocity.y=Constants.JUMP_ACCEL,this.m_body.SetAwake(!0)}else if(this.m_body&&e<c)return this.m_body.m_linearVelocity.x/=1.1},a.prototype.draw=function(a){var b,c,d,e,f;return a.drawImage(this.img,Helpers.round(this.x-this.radius-1),Helpers.round(this.y-this.radius)),f=this.radius/2,e=f*.95,this.isP2&&(e=-e),c=new Box2D.Common.Math.b2Vec2(this.x+e,this.y-f),d=new Box2D.Common.Math.b2Vec2(e,f),b=new Box2D.Common.Math.b2Vec2(this.ball.x,this.ball.y),b.Subtract(c),b.y=-b.y,b.Normalize(),b.Multiply(3),b.Add(d),a.drawImage(this.eyeImg,Helpers.round(this.x+b.x-2),Helpers.round(this.y-b.y-2))},a}();var Box,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Box=function(){function a(b,c,d,e){this.x=b,this.y=c,this.width=d,this.height=e,this.color="#444",a.__super__.constructor.apply(this,arguments)}return __extends(a,Sprite),a.prototype.createBody=function(){return this.fixture=new Box2D.Dynamics.b2FixtureDef,this.fixture.friction=1,this.fixture.restitution=.1,this.fixture.shape=new Box2D.Collision.Shapes.b2PolygonShape,this.fixture.shape.SetAsBox(this.width*Constants.SCALE,this.height*Constants.SCALE),this.body=new Box2D.Dynamics.b2BodyDef,this.body.type=Box2D.Dynamics.b2Body.b2_staticBody,this.body.position.Set(this.scaledX,this.scaledY)},a.prototype.draw=function(a){},a}();var Ball,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Ball=function(){function a(b,c,d){var e;this.x=b,this.y=c,this.bg=d,this.radius=9,this.color="#000000",e=this.bg,a.__super__.constructor.call(this,this.x,this.y,this.radius*2,this.radius*2),this.bg||(this.bg=e)}return __extends(a,Sprite),a.prototype.createBody=function(){return this.fixture=new Box2D.Dynamics.b2FixtureDef,this.fixture.density=.6,this.fixture.friction=1,this.fixture.restitution=.4,this.fixture.shape=new Box2D.Collision.Shapes.b2CircleShape(this.radius*Constants.SCALE),this.body=new Box2D.Dynamics.b2BodyDef,this.body.type=Box2D.Dynamics.b2Body.b2_dynamicBody,this.body.position.Set(this.scaledX,this.scaledY)},a.prototype.draw=function(a){return a.drawImage(this.bg,Helpers.round(this.x-this.radius),Helpers.round(this.y-this.radius))},a}();var AI;AI=function(){function a(){this._left=this._right=this._up=this._down=!1,this.ticksSkip=58,this.ticksWrap=60,this.tick=0}return a.prototype.calculateInput=function(a,b,c){var d,e;return this._left=this._right=this._up=this._down=!1,this.tick++,this.tick<=this.ticksSkip?this:(this.tick=this.tick>this.ticksWrap?0:this.tick,d=0,e=0,a.x>c.width/2&&(a.x<b.x?this._left=!0:this._right=!0),this)},a.prototype.left=function(){return this._left},a.prototype.right=function(){return this._right},a.prototype.up=function(){return this._up},a.prototype.down=function(){return this._down},a}();var LoadingScene,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};LoadingScene=function(){function a(){this.loadStarted=!1,this.progress=0,a.__super__.constructor.call(this)}return __extends(a,Scene),a.prototype.start=function(){var b;return b=this,this.loadStarted||(this.loadStarted=!0,Globals.Loader.loadProgress(function(a){return b.loadProgress(a,b)}),Globals.Loader.loadComplete(function(){return b.loadComplete()}),Globals.Loader.load(Constants.ASSETS)),a.__super__.start.call(this)},a.prototype.loadComplete=function(){return Globals.Manager.popScene(),Globals.Manager.pushScene(new MenuScene)},a.prototype.loadProgress=function(a,b){return this.progress=a,b.next()},a.prototype.step=function(a){if(!this.ctx)return;return this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#444",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.strokeStyle="#111",this.ctx.lineWidth=1,this.ctx.roundRect(Helpers.round(this.center.x-35),Helpers.round(this.center.y-5),70,10,2).stroke(),this.ctx.fillStyle="#444",this.ctx.roundRect(Helpers.round(this.center.x-35),Helpers.round(this.center.y-5),70,10,2).fill(),this.ctx.fillStyle="#0f0",this.ctx.roundRect(Helpers.round(this.center.x-35),Helpers.round(this.center.y-5),70*this.progress,10,2).fill(),this.ctx.font="12px Monaco, Courier New, Courier, san-serif",this.ctx.textAlign="center",this.ctx.fillStyle="#bbb",this.ctx.fillText("Loading...",Helpers.round(this.center.x),Helpers.round(this.center.y+25))},a}();var MenuScene,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};MenuScene=function(){function a(){var b,c,d,e,f,g,h,i,j,k,l;a.__super__.constructor.call(this),g=Globals.Loader,this.bg=new StretchySprite(0,0,this.width,this.height,1,1,g.getAsset("menu_bg")),this.logo=new Sprite(this.center.x-128,this.center.y-160,256,256,g.getAsset("logo")),this.logo.velocity=0,d=this.center.y+50,c=234,b=44,h=58,this.buttons={instructions:new Button(this.center.x+(this.center.x-c)/2,d,c,b,g.getAsset("btn_a"),g.getAsset("btn_b"),this),onePlayer:new Button((this.center.x-c)/2,d,c,b,g.getAsset("btn_a"),g.getAsset("btn_b"),this),options:new Button(this.center.x+(this.center.x-c)/2,d+h,c,b,g.getAsset("btn_a"),g.getAsset("btn_b"),this),wifi:new Button((this.center.x-c)/2,d+h,c,b,g.getAsset("btn_a"),g.getAsset("btn_b"),this)},this.labels=[],f=["btn_wifi","btn_options","btn_one","btn_instructions"],l=["instructions","onePlayer","options","wifi"],i=function(a){return this.labels.push(new Sprite(a.x,a.y,a.width,a.height,g.getAsset(f.pop())))};for(j=0,k=l.length;j<k;j++)e=l[j],i.call(this,this.buttons[e])}return __extends(a,Scene),a.prototype.step=function(a){var b,c,d,e,f,g,h;if(!this.ctx)return;this.next(),this.ctx.clearRect(0,0,this.width,this.height),this.bg.draw(this.ctx),this.logo.draw(this.ctx),g=this.buttons;for(c in g)b=g[c],b.draw(this.ctx);h=this.labels;for(e=0,f=h.length;e<f;e++)d=h[e],d.draw(this.ctx);return this.logo.y+=Math.sin(Math.PI/180*this.logo.velocity)/3,this.logo.velocity+=2},a.prototype.click=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleClick(a));return e},a.prototype.mousedown=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseDown(a));return e},a.prototype.mousemove=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseMove(a));return e},a.prototype.mouseup=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseUp(a));return e},a.prototype.buttonPressed=function(a){var b;if(a!==this.buttons.instructions){if(a===this.buttons.onePlayer)return SlimeVolleyball(b=new SlimeVolleyball),Globals.Manager.pushScene(b);if(a!==this.buttons.options&&a===this.buttons.wifi&&console)return console.log("wifi")}},a}();var SlimeVolleyball,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};SlimeVolleyball=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,Scene),a.prototype.start=function(){var b,c,d,e,f,g,h,i;this.world=new World,c=Globals.Loader,this.bg=new StretchySprite(0,0,this.world.width,this.world.height,200,1,c.getAsset("bg")),this.p1=new Slime(100,this.world.height-Constants.SLIME_START_HEIGHT,"#0f0",c.getAsset("p1"),c.getAsset("eye")),this.p2=new Slime(380,this.world.height-Constants.SLIME_START_HEIGHT,"#00f",c.getAsset("p2"),c.getAsset("eye")),this.ball=new Ball(100,this.world.height-340,c.getAsset("ball")),this.pole=new Sprite(this.center.x-4,this.height-60-64-1,8,64,c.getAsset("pole")),this.ai=new AI,this.p1.ball=this.ball,this.p2.ball=this.ball,this.p2.isP2=!0,this.world.addStaticSprite(this.bg),this.world.addStaticSprite(this.pole),this.world.addSprite(this.p1),this.world.addSprite(this.p2),this.world.addSprite(this.ball),this.buttons=[new Button(50,50,300,50,null,null,this)],b=60,f=1,e=1e3,g=[new Box(-f,-e,f,2*e),new Box(0,this.world.height-b+this.p1.radius,this.world.width,f),new Box(this.world.width,-e,f,2*e),new Box(this.world.width/2,this.world.height-b-32,4,32)];for(h=0,i=g.length;h<i;h++)d=g[h],this.world.addSprite(d);return this.failMsgs=["you failed miserably!","try harder, young one.","not even close!","he wins, you lose!",'"hahaha!" shouts your opponent.',"*** YOU LOST THE GAME ***"],this.winMsgs=["nice shot!","good job!","you've got this!","keep it up!","either you're good, or you got lucky!","*** YOU WON THE GAME ***"],this.paused=!1,a.__super__.start.call(this)},a.prototype.step=function(a){var b,c;if(this.paused){if(new Date-this.pauseTime>Constants.SET_DELAY){b=Globals.Input;if(b.up(0)||b.down(0)||b.left(0)||b.right(0))this.p1.setPosition(100,this.world.height-Constants.SLIME_START_HEIGHT),this.p2.setPosition(380,this.world.height-Constants.SLIME_START_HEIGHT),this.ball.setPosition(100,this.world.height-340),c={x:0,y:0},this.p1.m_body.SetLinearVelocity(c),this.p1.m_body.SetAwake(!1),this.p2.m_body.SetLinearVelocity(c),this.p2.m_body.SetAwake(!1),this.ball.m_body.SetLinearVelocity(c),b.reset(),window.p1=this.p1,this.paused=!1}this.next();return}return this.next(),this.world.step(a),this.p1.handleInput(Globals.Input,this.world),this.p2.handleInput(this.ai.calculateInput(this.ball,this.p2,this.world),this.world),this.p1.x+this.p1.radius>this.width/2-4&&(this.p1.m_body.m_linearVelocity.x=-5,this.p1.m_body.m_linearVelocity.y=5),this.p2.x-this.p2.radius<this.width/2+4&&(this.p2.m_body.m_linearVelocity.x=5,this.p1.m_body.m_linearVelocity.y=5),this.ball.y>0&&this.world.height-this.ball.y-this.ball.radius<60&&(this.ball.x<this.world.width/2?this.p2.score++:this.p1.score++,this.pauseTime=new Date,this.paused=!0),this.world.draw()},a.prototype.click=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleClick(a));return e},a.prototype.mousedown=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseDown(a));return e},a.prototype.mousemove=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseMove(a));return e},a.prototype.mouseup=function(a){var b,c,d,e;d=this.buttons,e=[];for(c in d)b=d[c],e.push(b.handleMouseUp(a));return e},a.prototype.buttonPressed=function(a){return console.log("button!")},a}(),window.onload=function(){var a;return Globals.Manager.canvas=document.getElementById("canvas"),Globals.Manager.ctx=Globals.Manager.canvas.getContext("2d"),Globals.Input=new Input,a=new LoadingScene,Globals.Manager.pushScene(a),a.start()}